<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="layout :: site-head" />
<body>
<header th:replace="layout :: site-header" />

<div class="container">
    <form class="upload-form" method="POST" th:object="${addPictureBindingModel}" enctype="multipart/form-data">
        <h3>Add Picture that Motivates You</h3>
        Picture to upload (max size 1MB): <input class="upload-file" type="file" data-max-size="1000000" name="picture" th:field="*{picture}" />
        Name: <input type="text" name="title" th:field="*{title}" />


        <input type="submit" value="Upload" />
    </form>
</div>

<footer th:replace="layout :: site-footer" />
</body>
</html>

<script>
    $(function(){
        var fileInput = $('.upload-file');
        var maxSize = fileInput.data('max-size');
        $('.upload-form').submit(function(e){
            if(fileInput.get(0).files.length){
                var fileSize = fileInput.get(0).files[0].size; // in bytes
                if(fileSize > maxSize){
                    alert('Picture file size is more than 1MB');
                    return false;
                }
            }else{
                alert('choose file, please');
                return false;
            }

        });
    });
</script>